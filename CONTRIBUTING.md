<!-- ############################################################################# -->
<!--                                  Header                                         -->
<!-- ############################################################################# -->

<table align="center"><tr><td align="center" width="9999">
<img src="https://i.ibb.co/zng41Q9/animation-1-0.png" align="center" width="200" alt="Project icon">

Project contribution guidelines

</td></tr>

</table>

Hello there, if you are reading this then you might be interested in contribute to the project. This is an open source project and im will be very happy to receive your contribution, so together we can improve the bot quality and  performance. So, for standardization reasons i will be describing some aspects of how to contribute with this project.

## Clone the project

First of all, fork and clone the project to your machine and run it following the guide on [readme page](https://github.com/brunolcarli/Ark/blob/master/README.md). Your contribution can be in the following forms:

- By adding new features;
- By improving the already existing features;
- By improving the code performance and readability based on good practices;


### A brief review of what the bot does

In short terms, the bot is just a client interface which sends a POST data to the url `https://api.spacex.land/graphql/`. If you access this endpoint through web browser you will find a screen which on its left side shows a list of check-buttons, these are the **queries** the API makes available. If you check the buttons, automatically it will generate the query code on the middle screen (you can write manually the queries here too). When you run the query by clicking on the run/play button, the response will return on a **json** format on the right side of the screen.

![](https://i.ibb.co/7GsTPMm/Captura-de-Tela-2021-02-17-a-s-22-45-01.png)

This data is delivered on the Discord interface within an embed through a command of the same name of the query:

![](https://i.ibb.co/jy97VTR/Captura-de-Tela-2021-02-17-a-s-23-58-40.png)

Some queries has **filters** which will show in purple. Some filters are required and some are not, i encourage you to explore the filters on this sandbox and play with data, this will bring you closer to the query understanding.

![](https://i.ibb.co/r0Rpr4Q/Captura-de-Tela-2021-02-17-a-s-22-54-22.png)


## Consuming with Python

**Ark** is written in **Python 3** programming language, so the first step is knowing how to get the data from the API. So suppose you want to get these `company` data from the API:

![](https://i.ibb.co/3yJh5MF/Captura-de-Tela-2021-02-17-a-s-22-49-16.png)

You will have to **POST** through `http` protocol the following GraphQL query:

```
{
  company {
    name
    ceo
  }
}
```

Notice that this query was generated by the sandbox automatically by clicking on the check-buttons.

In python we will use the module `requests` to post this data to the url `https://api.spacex.land/graphql/`:

```py
import requests

url = 'https://api.spacex.land/graphql/'
data = '''
{
  company {
    name
    ceo
  }
}
'''

response = requests.post(url, json={'query': data})
print(response.content)

# b'{"data":{"company":{"name":"SpaceX","ceo":"Elon Musk"}}}\n'
```

Then we can load the response with the `json` module and manipulate the data as a python dict:

```py
import json

py_dict = json.loads(response.content)

print(py_dict['data'])
print(py_dict['data']['company'])
print(py_dict['data']['company']['ceo'])

# {'company': {'name': 'SpaceX', 'ceo': 'Elon Musk'}}
# {'name': 'SpaceX', 'ceo': 'Elon Musk'}
# Elon Musk
```

The data will be then return to the discord interface in a beautiful embed. Simple as a red tomato isnt it? üçÖ 

## Git guidelines

**Branching**

Before pushing anything, be sure you are in an alternative *branch*, also try to name the branch with a name that correlates to the feature you are developing. You might pull from master before pushing anything as well.

```
$ git pull origin master
$ git checkout -b feature_query_missions
```

**Committing**

Alway commit your changes with a clear and objective message using the following prefixes:

- `ADD`: if adding a new feature or bot command;
- `CHANGE`: if changing any existing code, feature or file;
- `FIX`: if Fixing a bug or malfunction;

Example:

Suppose i just added a new command that list the `missions` query:

`$ git commit -m "ADD missions command"`


**Versioning**

Before push anything be sure to *bump* the project version. To do so, use `bumpversion`, it should be installed if you installed the dev requirements, otherwise just run:

```
$ pip install bumpversion
```

The project has three main version numbers:

[![Version badge](https://img.shields.io/badge/version-0.0.2-silver.svg)]()

From left to right: **Major**, **Minor**, **Patch**.

Always bump the patch version, the repository owner will bump the Major and Minor versions:

```
$ bumpversion patch
```

This will modify the version in the following files:

```
$ git status

On branch develop
Your branch is up to date with 'origin/develop'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)
	modified:   .bumpversion.cfg
	modified:   README.md
	modified:   ark/settings.py

```

Add these files to the git repository:

```
$ git add  .bumpversion.cfg README.md ark/settings.py
```

The commit with **CHANGE** prefix:

```
$ git commit -m "CHANGE version"
```

**Pushing and Pull Request**

Once again, be sure of pull the master branch before requests a merge of your branch.

```
$ git pull origin master
$ git push
```

Then, through the Github you may open a Pull Request. **Always point your Pull Request to the branch develop.** I will be waiting for it! :)

Any questions feel free to join our discord server: https://discord.gg/kmSxzWG

:)
